{"version":3,"file":"app.js","sourceRoot":"","sources":["../../client_user/polyfills.ts","../../client_user/tools.tsx","../../client_user/app.tsx"],"names":[],"mappings":"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","sourcesContent":["// https://tc39.github.io/ecma262/#sec-array.prototype.find\r\nif (!(Array.prototype as any).find) {\r\n\tObject.defineProperty(Array.prototype, 'find', {\r\n\t\tvalue(predicate: any) {\r\n\t\t\t// 1. Let O be ? ToObject(this value).\r\n\t\t\tif (this == null) {\r\n\t\t\t\tthrow new TypeError('\"this\" is null or not defined');\r\n\t\t\t}\r\n\r\n\t\t\tconst o = Object(this);\r\n\r\n\t\t\t// 2. Let len be ? ToLength(? Get(O, \"length\")).\r\n\t\t\tconst len = o.length >>> 0;\r\n\r\n\t\t\t// 3. If IsCallable(predicate) is false, throw a TypeError exception.\r\n\t\t\tif (typeof predicate !== 'function') {\r\n\t\t\t\tthrow new TypeError('predicate must be a function');\r\n\t\t\t}\r\n\r\n\t\t\t// 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n\t\t\tconst thisArg = arguments[1];\t// eslint-disable-line prefer-rest-params\r\n\r\n\t\t\t// 5. Let k be 0.\r\n\t\t\tlet k = 0;\r\n\r\n\t\t\t// 6. Repeat, while k < len\r\n\t\t\twhile (k < len) {\r\n\t\t\t\t// a. Let Pk be ! ToString(k).\r\n\t\t\t\t// b. Let kValue be ? Get(O, Pk).\r\n\t\t\t\t// c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\r\n\t\t\t\t// d. If testResult is true, return kValue.\r\n\t\t\t\tconst kValue = o[k];\r\n\t\t\t\tif (predicate.call(thisArg, kValue, k, o)) {\r\n\t\t\t\t\treturn kValue;\r\n\t\t\t\t}\r\n\t\t\t\t// e. Increase k by 1.\r\n\t\t\t\tk++;\r\n\t\t\t}\r\n\r\n\t\t\t// 7. Return undefined.\r\n\t\t\treturn undefined;\r\n\t\t},\r\n\t\tconfigurable: true,\r\n\t\twritable: true\r\n\t});\r\n}\r\n\r\n\r\n// from:https://github.com/jserz/js_piece/blob/master/DOM/ChildNode/remove()/remove().md\r\n[Element.prototype, CharacterData.prototype, DocumentType.prototype].forEach(item => {\r\n\tif (item.hasOwnProperty('remove')) {\t// eslint-disable-line no-prototype-builtins\r\n\t\treturn;\r\n\t}\r\n\tObject.defineProperty(item, 'remove', {\r\n\t\tconfigurable: true,\r\n\t\tenumerable: true,\r\n\t\twritable: true,\r\n\t\tvalue: function remove() {\r\n\t\t\tif (this.parentNode)\r\n\t\t\t\tthis.parentNode.removeChild(this);\r\n\t\t}\r\n\t});\r\n});\r\n\r\n\r\nif (!Math.trunc) {\r\n\tMath.trunc = v => {\r\n\t\tv = +v;\r\n\t\treturn !isFinite(v) ? v :\r\n\t\t\t(v - v % 1) || (v < 0 ? -0 : v === 0 ? v : 0);\r\n\t};\r\n}\r\n\r\n\r\nif (!Math.log10)\r\n\tMath.log10 = x => Math.log(x) * Math.LOG10E;\r\n","\r\nfunction parseFloat2(s: string) { const n = +s; return `${n}` === s ? n : NaN; }\t// https://stackoverflow.com/questions/17106681/parseint-vs-unary-plus-when-to-use-which\r\nfunction isNumeric(n: string) { return isFinite(+parseFloat2(n)); }\r\nfunction pad(num: number | string, size: number) { let s = num + \"\"; while (s.length < size) s = \"0\" + s; return s; }\r\nfunction formatDate(d: Date) { return `${d.getDate()}. ${d.getMonth() + 1}. ${d.getFullYear()} ${d.getHours()}:${pad(d.getMinutes(), 2)}:${pad(d.getSeconds(), 2)} (UTC+${-d.getTimezoneOffset() / 60})`; }\r\nfunction linInp(x: number, x1From: number, x1To: number, x2From: number, x2To: number) { return (x - x1From) / (x1To - x1From) * (x2To - x2From) + x2From; }\r\nfunction nextDay1(d: Date, step: number) { return new Date(d.getFullYear(), d.getMonth(), d.getDate() + step); }\r\n\r\n\r\n\r\nfunction range(n: number) { return Array(n).fill(0).map((_, i) => i); }\r\n\r\n\r\nfunction setAttr(element: Element, attrs: { [k: string]: string | number | React.CSSProperties }) {\r\n\tObject.keys(attrs).forEach(k => {\r\n\t\tconst v = attrs[k];\r\n\t\t//if (element.hasAttribute(k) && typeof v === \"string\")\r\n\t\t//\telement.setAttribute(k, v);\r\n\t\t//else\r\n\t\tif (!(k in element))\r\n\t\t\tconsole.error(`${k} is not a valid property name, <${element.tagName} ${k}={${v}}>`);\r\n\t\telse if (typeof v === \"string\")\r\n\t\t\telement[k] = v;\r\n\t\telse if (typeof v === \"number\")\r\n\t\t\telement[k] = v.toString();\r\n\t\telse if (v === null)\r\n\t\t\tconsole.error(`${v} is not a valid property value, <${element.tagName} ${k}={${v}}>`);\r\n\t\telse if (typeof v === \"object\")\r\n\t\t\tObject.keys(v).forEach(k2 => {\r\n\t\t\t\tif (k2 in element[k])\r\n\t\t\t\t\telement[k][k2] = v[k2];\r\n\t\t\t\telse\r\n\t\t\t\t\tconsole.error(`${k2} is not a valid ${k}, <${element.tagName} ${k}={{ ${k2}: ... }}>`);\r\n\t\t\t});\r\n\t\telse if (typeof v === \"boolean\" && typeof element[k] === \"boolean\")\r\n\t\t\telement[k] = v;\r\n\t\telse if (typeof v === \"function\" && [\"onclick\", \"onchange\", \"ontouchstart\", \"ontouchend\", \"onkeypress\",].indexOf(k) !== -1)\r\n\t\t\telement[k] = v;\r\n\t\telse\r\n\t\t\tconsole.error(`${v} is not a valid property value, <${element.tagName} ${k}={${v}}>`, v);\r\n\t});\r\n}\r\nfunction setStyle(element: HTMLElement, styles: React.CSSProperties) {\r\n\tsetAttr(element, { style: styles });\r\n}\r\nfunction setAttrSvg(element: SVGElement, attrs: { [k: string]: string | number | React.CSSProperties }) {\r\n\tObject.keys(attrs).forEach(k => {\r\n\t\tconst v = attrs[k];\r\n\t\t//if (!(k in element))\r\n\t\t//\tconsole.error(`${k} is not a valid property of a <${element.tagName}>`);\r\n\t\t//else\r\n\t\tif (typeof v === \"string\")\r\n\t\t\telement.setAttribute(k, v);\r\n\t\telse if (typeof v === \"number\")\r\n\t\t\telement.setAttribute(k, v.toString());\r\n\t\telse if (v === null)\r\n\t\t\tconsole.error(`${v} is not a valid property value, <${element.tagName} ${k}={${v}}>`);\r\n\t\telse if (typeof v === \"object\")\r\n\t\t\tObject.keys(v).forEach(k2 => {\r\n\t\t\t\tif (k2 in element[k])\r\n\t\t\t\t\telement[k][k2] = v[k2];\r\n\t\t\t\telse\r\n\t\t\t\t\tconsole.error(`${k2} is not a valid ${k}, <${element.tagName} ${k}={{ ${k2}: ... }}>`);\r\n\t\t\t});\r\n\t\t//else if (typeof v === \"boolean\" && typeof element[k] === \"boolean\")\r\n\t\t//\telement[k] = v;\r\n\t\t//else if (typeof v === \"function\" && k === \"onclick\")\r\n\t\t//\telement[k] = v;\r\n\t\telse\r\n\t\t\tconsole.error(`${v} is not a valid property value, <${element.tagName} ${k}={${v}}>`, v);\r\n\t});\r\n}\r\n\r\n\r\ntype TChild = string | number | Node | TChild[];\r\nfunction ac<T extends Element>(element: T, ...children: TChild[]) {\r\n\tchildren.forEach(c => {\r\n\t\tif (typeof c === \"string\")\r\n\t\t\telement.appendChild(document.createTextNode(c));\r\n\t\telse if (typeof c === \"number\")\r\n\t\t\telement.appendChild(document.createTextNode(c.toString()));\r\n\t\telse if (c instanceof Node)\r\n\t\t\telement.appendChild(c);\r\n\t\telse if (c instanceof Array)\r\n\t\t\tac(element, ...c);\r\n\t\telse\r\n\t\t\tconsole.error(`${c} is not a valid child, <${element.tagName}>{${c}}</${element.tagName}>`, c);\r\n\t});\r\n\treturn element;\r\n}\r\n\r\n\r\nfunction myCreateElement<T extends keyof ElementTagNameMap/*, U*/>(tag: T/* | ((props: any) => U)*/, attrs: { [k: string]: string | number | React.CSSProperties } | null, ...children: TChild[]) {\r\n\t//if (typeof tag === \"function\")\r\n\t//\treturn tag({ ...attrs, children });\r\n\tif ([\"svg\", \"path\", \"circle\", \"rect\", \"polyline\", \"text\", \"g\", \"clipPath\", \"defs\",].indexOf(tag) >= 0) {\r\n\t\tconst element = document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\r\n\t\tif (attrs !== null)\r\n\t\t\tsetAttrSvg(element, attrs);\r\n\t\treturn ac(element, ...children);\r\n\t} else {\r\n\t\tconst element = document.createElement(tag);\r\n\t\tif (attrs !== null)\r\n\t\t\tsetAttr(element, attrs);\r\n\t\treturn ac(element, ...children);\r\n\t}\r\n}\r\n\r\n\r\nfunction replaceContent(parent: HTMLElement, ...newContent: TChild[]) {\r\n\tparent.innerText = \"\";\r\n\tac(parent, newContent)\r\n}\r\n\r\n\r\n\r\n\r\n\r\ntype Func<A1, Ret> = (a: A1) => Ret;\r\nfunction toDictionary<T, TKey extends keyof any, TValue>(arr: T[], keySelector: Func<T, TKey>, valueSelector: Func<T, TValue>) {\r\n\tconst ret: Record<TKey, TValue> = {} as Record<TKey, TValue>;\r\n\tarr.forEach(p => ret[keySelector(p)] = valueSelector(p));\r\n\treturn ret;\r\n}\r\n\r\n\r\n\r\nfunction isTouchEvent(e: MouseEvent | PointerEvent | TouchEvent): e is TouchEvent { return (e as TouchEvent).touches !== undefined; }\r\nfunction eventPosToElement(e: MouseEvent | PointerEvent | TouchEvent, elem: Element) {\r\n\tconst rect = elem.getBoundingClientRect();\r\n\tconst pos = isTouchEvent(e) ? {\r\n\t\tclientX: avg(range(e.touches.length).map(i => e.touches[i].clientX)),\r\n\t\tclientY: avg(range(e.touches.length).map(i => e.touches[i].clientY)),\r\n\t} : e;\r\n\treturn { x: pos.clientX - rect.left, y: pos.clientY - rect.top, };\r\n\tfunction avg(a: number[]) { return a.reduce((prev, cur) => prev + cur) / a.length; }\r\n}\r\n","\r\n/// <reference path=\"csstype.d.ts\" />\r\n/// <reference path=\"react.d.ts\" />\r\n/// <reference path=\"polyfills.ts\" />\r\n/// <reference path=\"tools.tsx\" />\r\n\r\n/*\r\n\tclanek s grafem: http://www.righto.com/2013/11/how-hacker-news-ranking-really-works.html\r\n\thttps://news.ycombinator.com/best\tclanky jsou serazene podle \"points\"\r\n\thttps://github.com/HackerNews/API, https://hacker-news.firebaseio.com/v0/item/121003.json?print=pretty\r\n\thttp://hnapp.com/?q=score>50\r\n\r\n\thttps://hn.algolia.com/?dateEnd=1587317653&dateRange=custom&dateStart=1586712853&page=0&prefix=false&query=&sort=byPopularity&type=story\r\n*/\r\n\r\napp();\r\nwindow.addEventListener('popstate', app);\r\nasync function app() {\r\n\r\n\tconst pars = toDictionary(window.location.hash.substring(1).split(\"&\").map(p => p.split(\"=\")), p => p[0], p => p[1]);\r\n\r\n\tconst days = pars.days !== undefined ? +pars.days : 7;\r\n\tconst from0 = pars.from !== undefined ? parseDateLocal(pars.from) : new Date(NaN);\r\n\tconst from = isDateValid(from0) ? from0 : nextDay1(new Date(), -days);\r\n\tfunction parseDateLocal(s: string) {\r\n\t\tconst a = s.split(/\\D/);\r\n\t\treturn [0, 1, 2,].every(i => isNumeric(a[i])) ? new Date(+a[0], +a[1] - 1, +a[2]) : new Date(NaN);\r\n\t}\r\n\tfunction isDateValid(d: any): d is Date { return d instanceof Date && !isNaN(+d); }\r\n\tconst hitsCount = 300;\r\n\tconst to = nextDay1(from, days);\r\n\r\n\t// rozlozeni stranky\r\n\tlet table: HTMLElement;\r\n\tlet graph: HTMLElement;\r\n\tconst div =\r\n\t\t<div style={{ backgroundColor: \"rgb(246, 246, 239)\", margin: \"10px 100px\", padding: \"10px\", }}>\r\n\t\t\t<div style={{ height: \"10px\", }} />\r\n\t\t\t<div><span title={formatDate(from)}>{formatDate2(from)}</span> - <span title={formatDate(to)}>{formatDate2(nextDay1(to, -1))}</span></div>\r\n\t\t\t<div style={{ height: \"10px\", }} />\r\n\t\t\t{graph = <div style={{ float: \"right\", position: \"sticky\", top: \"60px\", width: \"600px\", height: \"300px\", }} />}\r\n\t\t\t{table = <table style={{ borderCollapse: \"collapse\", }}><tr><td>...</td></tr></table>}\r\n\t\t</div>;\r\n\r\n\t// stazeni dat\r\n\tconst data: TApi = await(await fetch(`https://hn.algolia.com/api/v1/search?tags=story&numericFilters=created_at_i>${from.getTime() / 1000},created_at_i<${to.getTime() / 1000}&hitsPerPage=${hitsCount}`)).json();\r\n\ttype TApi = {\r\n\t\thits: {\r\n\t\t\ttitle: string | null,\r\n\t\t\turl: string | null,\r\n\t\t\tpoints: number,\r\n\t\t\tnum_comments: number | null,\r\n\t\t\tcreated_at_i: number,\r\n\t\t\t//relevancy_score: number,\r\n\t\t\t//_tags: string[],\r\n\t\t\tobjectID: string,\r\n\t\t}[];\r\n\t};\r\n\tconst data2 = data.hits.map(h => ({\r\n\t\turl: h.url ?? `https://news.ycombinator.com/item?id=${h.objectID}`,\r\n\t\turlComments: `https://news.ycombinator.com/item?id=${h.objectID}`,\r\n\t\tcreated_at: new Date(h.created_at_i * 1000),\r\n\t\ttitle: h.title ?? \"\",\r\n\t\tpoints: h.points,\r\n\t\tnum_comments: h.num_comments ?? 0,\r\n\t}));\r\n\r\n\t// vytvoreni elementu\r\n\tconst [x1, x2,] = [30, 590,], [y1, y2,] = [282, 10,];\r\n\tconst xAxis = createTimeAxis(from, to, x1, x2);\r\n\tconst yAxis = createCommonAxis(Math.min(100, ...data2.map(h => h.points)), Math.max(1000, ...data2.map(h => h.points)), y1, y2);\r\n\tconst data3 = data2.map(h => {\r\n\t\tconst tr =\r\n\t\t\t<tr>\r\n\t\t\t\t<td>{h.points}</td>\r\n\t\t\t\t<td style={{ paddingLeft: \"10px\", whiteSpace: \"nowrap\", }} title={formatDate(h.created_at)}>{formatDate2(h.created_at)}</td>\r\n\t\t\t\t<td style={{ paddingLeft: \"10px\", }}><a href={h.url}>{h.title}</a> | <a href={h.urlComments}>{h.num_comments} comments</a></td>\r\n\t\t\t</tr>;\r\n\t\tconst x = xAxis.toDisp(h.created_at);\r\n\t\tconst y = yAxis.toDisp(h.points) - 1;\r\n\t\tconst point =\r\n\t\t\t<a href={h.urlComments} className=\"point\" title={h.title!} style={{ position: \"absolute\", left: `${x - 3}px`, top: `${y - 3}px`, width: \"7px\", height: \"7px\", borderRadius: \"100px\", }} />;\r\n\r\n\t\ttr.onmouseenter = () => setStyle(point, { border: \"1px solid black\", });\r\n\t\ttr.onmouseleave = () => setStyle(point, { border: \"none\", });\r\n\t\t//point.onmouseenter = () => setStyle(tr, { backgroundColor: \"#ddd\", });\r\n\t\t//point.onmouseleave = () => setStyle(tr, { backgroundColor: null as any as string, });\r\n\r\n\t\treturn { ...h, tr, point, x, y, };\r\n\t});\r\n\r\n\t// voronoi\r\n\tconst nearestArr = range(600).map(x => range(300).map(y => {\r\n\t\tif (y > y1)\r\n\t\t\treturn null;\r\n\t\tlet hNearest: typeof data3[0] | null = null;\r\n\t\tlet hNearestDist = Infinity;\r\n\t\tdata3.forEach(h => {\r\n\t\t\tconst hNearestDist2 = (h.x - x) ** 2 + (h.y - y) ** 2;\r\n\t\t\tif (hNearestDist2 < hNearestDist) { hNearestDist = hNearestDist2; hNearest = h; }\r\n\t\t});\r\n\t\treturn hNearest as typeof data3[0] | null;\r\n\t}));\r\n\tlet lastHighlighted: typeof data3[0] | null = null;\r\n\tfunction auxMove(e: MouseEvent) {\r\n\t\tconst p = eventPosToElement(e, graph);\r\n\t\tconst h = (nearestArr[p.x] ?? [])[p.y] ?? null;\r\n\t\tif (h !== lastHighlighted) {\r\n\t\t\tif (lastHighlighted) {\r\n\t\t\t\tsetStyle(lastHighlighted.point, { border: \"none\", });\r\n\t\t\t\tsetStyle(lastHighlighted.tr, { backgroundColor: null as any as string, });\r\n\t\t\t}\r\n\t\t\tif (h) {\r\n\t\t\t\tsetStyle(h.point, { border: \"1px solid black\", });\r\n\t\t\t\tsetStyle(h.tr, { backgroundColor: \"#ddd\", });\r\n\t\t\t}\r\n\t\t\tlastHighlighted = h;\r\n\t\t}\r\n\t\tconsole.log(p.x, p.y);\r\n\t}\r\n\tgraph.onmousemove = auxMove;\r\n\tgraph.onmouseleave = auxMove;\r\n\r\n\t// zobrazeni tabulky\r\n\treplaceContent(table, data3.map(h => h.tr));\r\n\r\n\t// zobrazeni grafu\r\n\tac(graph,\r\n\t\t<svg style={{ width: \"100%\", height: \"100%\", transform: \"translate(-0.5px, -0.5px)\", backgroundColor: \"#fff\", pointerEvents: \"none\", }}>\r\n\t\t\t{yAxis.linesH(x1, x2)}\r\n\t\t\t{xAxis.linesV(y1, y2)}\r\n\t\t\t<path style={{ fill: \"none\", stroke: \"#999\", }} d={`M${x1},${y1} H${x2}`} />\r\n\t\t\t<path style={{ fill: \"none\", stroke: \"#999\", }} d={`M${x1},${y1} V${y2}`} />\r\n\t\t</svg>,\r\n\t\tdata3.map(h => h.point),\r\n\t\txAxis.linesV2(y1, y2),\r\n\t\t<div>{a(nextDay1(from, -days), days, <span>&lt;</span>)} {a(nextDay1(from, days), days, <span>&gt;</span>)} {days === 1 ? a(nextDay1(from, -3), 7, \"^\") : \"\"}</div>\r\n\t);\r\n\r\n\treplaceContent(document.body, div);\r\n}\r\n\r\nfunction a(from2: Date, days2: number, text: TChild, style: React.CSSProperties = {}) {\r\n\treturn <a href={`#from=${from2.getFullYear()}-${from2.getMonth() + 1}-${from2.getDate()}&days=${days2}`} style={style}>{text}</a>\r\n}\r\n\r\n\r\n\r\n\r\n//function formatDay(day: Date) { return `${day.getFullYear()}-${pad(day.getMonth() + 1, 2)}-${pad(day.getDate(), 2)}`; }\r\nfunction formatDate2(d: Date) { return `${d.getDate()}. ${d.getMonth() + 1}.`; }\r\nfunction isMonday(d: Date) { return d.getDay() === 1; }\r\n\r\nfunction createTimeAxis(dataFrom: Date, dataTo: Date, dispFrom: number, dispTo: number) {\r\n\r\n\treturn { toDisp, linesV, linesV2, };\r\n\r\n\tfunction toDisp(x: Date) { return linInp(x.getTime(), dataFrom.getTime(), dataTo.getTime(), dispFrom, dispTo); }\r\n\r\n\tfunction linesV(y1: number, y2: number) {\r\n\t\tconst ret: HTMLElement[] = [];\r\n\t\tfor (let i = dataFrom; i < dataTo; i = nextDay1(i, 1))\r\n\t\t\tret.push(<path style={{ fill: \"none\", stroke: isMonday(i) ? \"#ccc\" : \"#eee\", }} d={`M${Math.round(toDisp(i))},${y1} V${y2}`} />);\r\n\t\t//for (let i = dataFrom; i < dataTo; i = nextDay1(i, 1))\r\n\t\t//\tret.push(<text x={Math.round(toDisp(i))} y={y1 + 1} style={{ font: \"normal 12px sans-serif\", fill: \"#666\", dominantBaseline: \"hanging\", }}>{formatDate2(i)}</text>);\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tfunction linesV2(y1: number, y2: number) {\r\n\t\tconst ret: HTMLElement[] = [];\r\n\t\tfor (let i = dataFrom; i < dataTo; i = nextDay1(i, 1))\r\n\t\t\tret.push(a(i, 1, formatDate2(i), { position: \"absolute\", left: `${Math.round(toDisp(i))}px`, top: `${y1 + 1}px`, font: \"normal 12px sans-serif\", }));\r\n\t\treturn ret;\r\n\t}\r\n}\r\n\r\nfunction createCommonAxis(dataFrom: number, dataTo: number, dispFrom: number, dispTo: number) {\r\n\r\n\treturn { toDisp, linesH, };\r\n\r\n\tfunction toDisp(x: number) { return linInp(trans(x), trans(dataFrom), trans(dataTo), dispFrom - 5, dispTo + 5); }\r\n\tfunction trans(x: number) { return Math.log(x); }\r\n\r\n\tfunction linesH(x1: number, x2: number) {\r\n\t\tconst ret: HTMLElement[] = [];\r\n\t\tfor (let i = 0; i < dataTo; i += 100)\r\n\t\t\tret.push(<path style={{ fill: \"none\", stroke: i % 1000 === 0 ? \"#ccc\" : i % 500 === 0 ? \"#ddd\" : \"#eee\", }} d={`M${x1},${Math.round(toDisp(i))} H${x2}`} />);\r\n\t\t[3000, 2000, 1000, 500, 400, 300, 200, 100, 50, 40, 30, 20, 10,].filter(i => dataFrom <= i && i < dataTo)\r\n\t\t\t.forEach(i => ret.push(<text x={x1 - 4} y={toDisp(i)} style={{ font: \"normal 12px sans-serif\", fill: \"#666\", textAnchor: \"end\", dominantBaseline: \"middle\", }}>{i >= 1000 ? `${i / 1000}k` : i}</text>));\r\n\t\treturn ret;\r\n\t}\r\n}\r\n"]}